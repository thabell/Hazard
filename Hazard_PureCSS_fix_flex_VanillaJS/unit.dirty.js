/*–ó–ê–ú–ï–ù–ò–¢–¨ there_is_unsynchronized_data_on_local = true; –ù–ê –î–û–ë–ê–í–õ–ï–ù–ò–ï –ö–õ–ê–°–°–ê*/
/*–ó–ê–ú–ï–ù–ò–¢–¨ there_is_unsynchronized_data_on_local = false; –ù–ê –£–î–ê–õ–ï–ù–ò–ï –ö–õ–ê–°–°–ê*/




/*localStorage.setItem("isFirstAdminLoading", true)*/




/*–ö–ê–†–û–ß–ï –£–ë–†–ê–¢–¨ –ü–†–ò–°–í–û–ï–ù–ò–ï CURR_USER*/
/*–°–î–ï–õ–ê–¢–¨ –ü–†–ò–°–í–û–ï–ù–ò–ï –ö–ê–†–† –¢–û–õ–¨–ö–û –ü–†–ò –õ–û–ì –ò–ù –ò –¢–†–´–ù–î–ï–¶*/
/*–ê –Æ–ó–ï–†–ê –î–õ–Ø –î–û–ö–û–í –ú–û–ñ–ù–û –û–¢–î–ï–õ–¨–ù–û –ü–†–ò–°–í–ê–ò–í–ê–¢–¨. –ò–ó –°–ü–ò–°–ö–ê. –¢–ê–ö, –ö–ê–ö –í –ê–†–•–ò–¢–ï–ö–¢–£–†–ï –ü–†–û–ì–û–í–ê–†–ò–í–ê–õ. –¢–ò–ü–ê –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ –ö–†–ê–ô–ù–ò–ô, –ê –ï–°–õ–ò –ö–õ–ò–ö –ü–û –ö–ê–ö–û–ú–£-–õ–ò–ë–û –ò–¢–ï–ú–£ –¥–† –Æ–ó–ï–†–ê, –¢–û –ü–ï–†–ï–•–û–¥ –ö –ù–ï–ú–£*/



/*!!!!!!!!!–ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≥–Ω–æ–≤–æ–≥–æ –¥–æ–∫–∞ –∏–ª–∏ —é–∑–µ—Ä–∞ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –µ–º—É —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id*/


/*–≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–º –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –∏ –∑–∞—Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ*/




/* –µ—Å–ª–∏ —Å—Ç–æ–∏—Ç –≥–∞–ª–∫–∞ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ "–∑–∞–ø–æ–º–Ω–∏—Ç—å"!!!! –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ª–æ–∫–∞–ª—Å—Ç–æ—Ä–∞–≥–µ –¥–∞—Ç—É –ø–æ–¥–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–∞—Ç—ã. –µ—Å–ª–∏ –±–æ–ª–µ–µ –¥–≤—É—Ö —Å—É—Ç–æ–∫, –ø—ã—Ç–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—å –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω–Ω–æ–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –∑–∞—Ç–µ–º —á–∏—Å—Ç–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω—É –ø–æ —Å—É—Ç–∏ –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ª–æ–≥ –∞—É—Ç –∏ —Ç—Ä—ã–Ω–¥–µ—Ü) –µ—Å–ª–∏ –Ω–µ —Å—Ç–æ–∏—Ç –≥–∞–ª–∫–∞ "–∑–∞–ø–æ–º–Ω–∏—Ç—å", —Ç–æ –≤—ã–∫–∏–¥—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å—É—Ç–∫–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è */





var isStorageSupport = false;
var isLoginDone = false;
var isAdmin = false;
var isModer = false;
var isUser = true; /*—á–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –¢–û–õ–¨–ö–û –¥–ª—è —é–∑–µ—Ä–æ–≤ (—Ç–∏–ø–∞ —Å–ø–∏—Å–∫–∞ –∏—Ö –¥–æ–∫–æ–≤ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —Ä–µ–∫–ª–∞–º—ã –∫–∞–∫–æ–π-—Ç–æ, ...)*/
var there_is_unsynchronized_data_on_local = false;
var isFirstAdminLoading = false;
try {
	localStorage.setItem("isStorageSupport", true);
	isStorageSupport = localStorage.getItem("isStorageSupport");
	console.log(localStorage);
	isLoginDone = localStorage.getItem("isLoginDone");
	isAdmin = localStorage.getItem("isAdmin");
	isModer = localStorage.getItem("isModer");
	isUser = localStorage.getItem("isUser");
	there_is_unsynchronized_data_on_local = localStorage.getItem("there_is_unsynchronized_data_on_local");
	isFirstAdminLoading = localStorage.getItem("isFirstAdminLoading");
} catch (error) {
	console.log("LocalStorage is not supported");
}

if (isFirstAdminLoading === "true") {
	isAdmin = true;
}


var loged_in_user = null;
var viewing_user =  null; /*–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—Å—è —Å –ª–æ–∫–∞–ª–∫–æ–π*/
var viewing_doc = null; /*—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–Ω –±—É—Ä–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å*/
var temp_user = null;



/* ------ Unit ------ */
var Unit = function(mail, login, password, surname, name, firstname) {

	this._typeofObj = "Unit";

	if (arguments.length === 0) { /*new User()*/
		/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Temp */

		this._id = null;
		this._level = "user"
		this._mail = null;
		this._login = null;
		this._password = null;
		this._surname = null;
		this._name = null;
		this._firstname = null;
		this._docList = new Array(); /*_docList - –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —é–∑–µ—Ä–∞*/

		myLocalStorage.prototype.synchronizeAllData(this); /* –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ temp'a –≤ –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ */

	} else if (arguments.length === 1) { /*new User(obj)*/
		/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ª–æ–≥ –∏–Ω –∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º –ø–∞—Ä—Å–µ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â*/
console.log("–ª–æ–≥–∏–Ω —é–∑–µ—Ä–∞ –∏–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞");
		var obj = arguments[0];

		this._id = obj._id; /*—Å–æ–ª–∏—Ç—å –∞–π–¥–∏—à–Ω–∏–∫ —Ç–æ–∂–µ*/
		this._level = obj._level;
		this._mail = obj._mail;
		this._login = obj._login;
		this._password = obj._password;
		this._surname = obj._surname;
		this._name = obj._name;
		this._firstname = obj._firstname;
		this._docList = new Array();
		for (var i = 0; i < obj._docList.length; i++) {
			this._docList.push(new Doc(obj._docList[i]));
		}

	} else if (arguments.length > 1) { /*new User(mail, login...)*/
		/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏*/

		this._id = Unit.prototype.getNextId();
		this._level = "user";
		this._mail = mail;
		this._login = login;
		this._password = password;
		this._surname = surname;
		this._name = name;
		this._firstname = firstname;
		this._docList = new Array();

		/*–¥–æ–±–∞–≤–∏—Ç—å –õ–ò –ó–î–ï–°–¨ —Å–∏–Ω—Ö—Ä–æ–Ω –¥–æ–∫–æ–≤ Temp —é–∑–µ—Ä–∞*/
	}

	return this;
}

if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) {
	Unit.prototype.userList = new Array(); /* –Ω–æ–≤—ã–π –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π */
}

Unit.prototype.getNextId = function() {
	var next_id;
	try {
		next_id = Server.prototype.getNextId();
		if (!next_id) { throw new Error; }
	} catch (error) { throw new Error("Can not set new id üò£"); }
	Server.prototype.setNextId(++next_id);
	return next_id;
}
Unit.prototype.getId = function() {
	return this._id;
}
Unit.prototype.getLevel = function() {
	return this._level;
}
Unit.prototype.setLevel = function(value) {
	/* –ó–î–ï–°–¨ –¢–ò–ü–ê –ü–†–û–í–ï–†–ö–£ if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) { */
	this._level = value;
	this.userDataChanged777(this);
	/* Server –±—É–¥–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∫–Ω–æ–ø–∫–µ, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –º–µ–Ω—é, –∫–æ—Ç–æ—Ä–æ–µ –≥–µ–Ω–∏—Ä–∏—Ä—É–µ—Ç—Å—è if loginIsDone; –∏ –ø—Ä–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –ª—é–±–æ–π –∏–∑ —Å—Å—ã–ª–æ–∫ (= –≤ —Ç. —á. –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è))*/
}
Unit.prototype.getMail = function() {
	return this._mail;
}
Unit.prototype.setMail = function(value) {
	this._mail = value;
	this.userDataChanged777(this);
}
Unit.prototype.getLogin = function() {
	return this._login;
}
Unit.prototype.setLogin = function(value) {
	this._login = value;
	this.userDataChanged777(this);
}
Unit.prototype.getPassword = function() {
	return this._password;
}
Unit.prototype.setPassword = function(value) {
	this._password = value;
	this.userDataChanged777(this);
}
Unit.prototype.getSurname = function() {
	return this._surname;
}
Unit.prototype.setSurname = function(value) {
	this._surname = value;
	this.userDataChanged777(this);
}
Unit.prototype.getName = function() {
	return this._name;
}
Unit.prototype.setName = function(value) {
	this._name = value;
	this.userDataChanged777(this);
}
Unit.prototype.getFirstname = function() {
	return this._firstname;
}
Unit.prototype.setFirstname = function(value) {
	this._firstname = value;
	this.userDataChanged777(this);
}
Unit.prototype.getDocList = function() {
	return this._docList;
}
Unit.prototype.setDocList = function(value) {
	this._docList = value;
	this.userDataChanged777(this);
}
Unit.prototype.pushNewDocToList = function(value) {
	this._docList.push(value);
	this.userDataChanged777(this);
}

Unit.prototype.userDataChanged777 = function(obj) {
	myLocalStorage.prototype.synchronizeAllData(obj);
	there_is_unsynchronized_data_on_local = true;
	localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
}

var Doc = function(is_main_doc, doc_title, doc_url_to_open, doc_org_name, doc_user_id) {

	if (arguments.length === 0) { /*new Doc()*/
	/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ unit, Temp –∏–ª–∏ User*/

		this._doc_id = null;
		this._is_main_doc = null; /*true*/
	    this._doc_title = null; /*–î–æ–∫ 1*/
	    this._doc_url_to_open = null; /*user-doc-main*/
	    /* –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ */
	    this._doc_org_name = null; /*–°–æ–≤—Ö–æ–∑ 2*/
	    this._doc_user_id = null; /*324*/
	    this._doc_dataList = {};

    } else if (arguments.length === 1) { /*new Doc(obj)*/
	/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ª–æ–≥ –∏–Ω –∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º –ø–∞—Ä—Å–µ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞*/
		var obj = arguments[0];

		this._doc_id = obj._doc_id;
		this._is_main_doc = obj._is_main_doc; /*true*/
	    this._doc_title = obj._doc_title; /*–î–æ–∫ 1*/
	    this._doc_url_to_open = obj._doc_url_to_open; /*user-doc-main*/
	    /* –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ */
	    this._doc_org_name = obj._doc_org_name; /*–°–æ–≤—Ö–æ–∑ 2*/
	    this._doc_user_id = obj._doc_user_id; /*324*/
	    this._doc_dataList = {};

	} else if (arguments.length > 1) { /*new Doc(mail, is_main_doc, doc_title...)*/
	/*–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ–∫–∞*/

		this._doc_id = Unit.prototype.getNextId();
		this._is_main_doc = is_main_doc; /*true*/
	    this._doc_title = doc_title; /*–î–æ–∫ 1*/
	    this._doc_url_to_open = doc_url_to_open; /*user-doc-main*/
	    /* –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ */
	    this._doc_org_name = doc_org_name; /*–°–æ–≤—Ö–æ–∑ 2*/
	    this._doc_user_id = doc_user_id; /*324*/
	    this._doc_dataList = {};

	}
	/*–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —á–∏—Å—Ç–æ–º –≤–∏—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —é–Ω–∏—Ç–æ–º, - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–æ–∫–õ–∏—Å—Ç*/
	return this;
}

Doc.prototype.getIsMainDoc = function() {
	return this._is_main_doc;
}
Doc.prototype.setIsMainDoc = function(value) {
	this._is_main_doc = value;
	this.userDataChanged777(this);
}
Doc.prototype.getDocTitle = function() {
	return this._doc_title;
}
Doc.prototype.setDocTitle = function(value) {
	this._doc_title = value;
	this.userDataChanged777(this);
}
Doc.prototype.getDocUrlToOpen = function() {
	return this._doc_url_to_open;
}
Doc.prototype.setDocUrlToOpen = function(value) {
	this._doc_url_to_open = value;
	this.userDataChanged777(this);
}
Doc.prototype.getDocOrgName = function() {
	return this._doc_org_name;
}
Doc.prototype.setDocOrgName = function(value) {
	this._doc_org_name = value;
	this.userDataChanged777(this);
}
Doc.prototype.getDocUserId = function() {
	return this._doc_user_id;
}
Doc.prototype.setDocUserId = function(value) {
	this._doc_user_id = value;
	this.userDataChanged777(this);
}
Doc.prototype.getDocDataList = function() {
	return this._doc_dataList;
}
Doc.prototype.setDocDataList = function(value) {
	this._doc_dataList = value;
	this.userDataChanged777(this);
}
Unit.prototype.getDocDataListItem = function(key) {
	return this.key;
}
Unit.prototype.setDocDataListItem = function(key, value) { /*–±–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã –∑–∞–º–µ–Ω–∏—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å*/
	this._doc_dataList.key = value;
	this.userDataChanged777(this);
}

Unit.prototype.viewingUserChanged = function() {
	Server.prototype.synchronizeAllData();
}

/*–§–£–ù–ö–¶–ò–Ø ADDDOC –ü–†–û–í–ï–†–Ø–ï–¢ –ü–û ID –ï–°–¢–¨ –õ–ò DOC,
	–ï–°–õ–ò –ï–°–¢–¨ –¢–û –í–´–ó–´–í–ê–ï–¢–°–Ø –§–£–ù–ö–¶–ò–Ø ADDDOCDATAITEM, –ö–û–¢–û–†–ê–Ø –î–û–ë–ê–í–õ–Ø–ï–¢/–û–ë–ù–û–í–õ–Ø–ï–¢ –ü–û–õ–ï
	–ï–°–õ–ò –ù–ï–¢, –¢–û –î–û–ë–ê–í–õ–Ø–ï–¢ –ù–û–í–´–ô DOC*/
/*–ï–©–ï –ë–´ –•–û–†–û–®–û –í –ù–ï–ô –ü–†–û–í–ï–†–ö–£ –ù–û–í–ò–ó–ù–´ –ò–ù–§–´ –°–î–ï–õ–ê–¢–¨ –ò–õ–ò –í–û–û–ë–©–ï –û–¢–î–ê–í–ê–¢–¨ –ú–ï–†–î–ñ–ò–¢–¨ –Æ–ó–ï–†–£*/
/* ------ /Unit ------ */


/* ---------------Server--------------- */
var Server = function() {} /*—Å–∏–Ω–≥–ª—Ç–æ–Ω*/

Server.prototype.getNextId = function() {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		return localStorage.getItem("nextIdOnServer");
	} else { console.log("LocalStorage is not supported."); throw new Error; }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}
Server.prototype.setNextId = function(value) {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		localStorage.setItem("nextIdOnServer", value);
	} else { console.log("LocalStorage is not supported."); throw new Error; }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

Server.prototype.getAllData = function() {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		if ((isLoginDone === "true") || (isLoginDone === true)) {
			var userListOnServer = localStorage.getItem("userListOnServer");
			if (userListOnServer && (userListOnServer !== "null")) {
				var old_level = loged_in_user.getLevel();
				if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) { Unit.prototype.userList.splice(0); }
				JSON.parse(userListOnServer, function(key, value) {
					 if (this._typeofObj === "Unit") {
					 	var temp_unit = new Unit(this);
					 	if (temp_unit.getId() === loged_in_user.getId()) {
					 		localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
					 		viewing_user = loged_in_user;
					 		console.log("loged_in_user");
					 		console.log(loged_in_user);
					 		console.log("viewing_user");
					 		console.log(viewing_user);
					 		console.log("c server –æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–Ω unit");
					 		if ((isUser === "true") || (isUser === true)) {
					 			myLocalStorage.prototype.synchronizeAllData(temp_unit);
					 			return 1;
					 		}
					 	}
					 	if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) {
						 	Unit.prototype.userList.push(temp_unit);
						 	console.log("c server —Å–æ–∑–¥–∞–Ω —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π unit –≤ —Å–ø–∏—Å–æ–∫");
						 	myLocalStorage.prototype.synchronizeAllData(temp_unit);
						 	console.log("c server —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω unit –≤ localList");
						}
					}
				});
				if (loged_in_user.getLevel() === "admin") { isAdmin = true; isModer = false; isUser = false; }
				else if (loged_in_user.getLevel() === "moder")  { isAdmin = false; isModer = true; isUser = false; }
				else { isAdmin = false; isModer = false; isUser = true; }
				localStorage.setItem("isAdmin", isAdmin);
				localStorage.setItem("isModer", isModer);
				localStorage.setItem("isUser", isUser);
				if (old_level !== loged_in_user.getLevel()) { Server.prototype.getAllData(); console.log("–£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω. –î–∞–Ω–Ω—ã–µ —Å server –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –∑–∞–Ω–æ–≤–æ."); }
			} else throw new Error();

		} else { /* if Temp */ console.log("By working with temporary data, synchronizing with server is not supported."); throw new Error();	}
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

Server.prototype.synchronizeAllData = function() { /* –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–æ–≤–∏–∑–Ω–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–± –≥—Ä–∞–º–æ—Ç–Ω–æ –º–µ—Ä–¥–∂–∏—Ç—å, –¥–ª—è —ç—Ç–æ–≥–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–æ–ø. –ø–æ–ª—è —Å –∫—ç—à–µ–º, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å—Å—è. –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞, –≤—Å–µ –Ω–æ—Ä–º, –µ—Å–ª–∏ –Ω–µ—Ç, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ç–µ–º–ø-–¥–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ä–¥–∂–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≤–æ–≤—Å–µ –∞–¥–º–∏–Ω—É */
	if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) {
		/*Server.prototype._synchronizeUserData();*/ /*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–≥–æ —é–∑–µ—Ä–∞*/
		/*–º–æ–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é, —á—Ç–æ–± –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫, –∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—è—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ù–û —Ç–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è*/
		if ((there_is_unsynchronized_data_on_local === "true") || (there_is_unsynchronized_data_on_local === true)) {
			Server.prototype.setAllUnitsFromLocal();
			there_is_unsynchronized_data_on_local = false;
			localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
		}
	} else if ((isLoginDone === "true") || (isLoginDone === true)) {
		if ((there_is_unsynchronized_data_on_local === "true") || (there_is_unsynchronized_data_on_local === true)) {
			Server.prototype._synchronizeUserData(); /*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–≥–æ —é–∑–µ—Ä–∞*/
			there_is_unsynchronized_data_on_local = false;
			localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
		}
	} else { /* if Temp */
		console.log("By working with temporary data, synchronizing with server is not supported.");
	}
};

Server.prototype.setAllUnitsFromLocal = function() {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		localStorage.setItem("userListOnServer", localStorage.getItem("userListOnLocal"));
	} else { console.log("LocalStorage is not supported."); }
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

Server.prototype._synchronizeUserData = function(synth_user) {  /*–Ω–µ –¥–ª—è Temp*/
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		if ((arguments.length === 0) || (!arguments[0])) {
			var synth_user = viewing_user;
		}
		var userListOnServer = localStorage.getItem("userListOnServer");
		if (userListOnServer && (userListOnServer !== "null")) { /*–Ω–µ –ø–µ—Ä–≤—ã–π —é–∑–µ—Ä*/
			console.log("–Ω–µ –ø–µ—Ä–≤—ã–π —é–∑–µ—Ä");
			var userListOnServer_parsed = JSON.parse(userListOnServer);
			for (var i = 0; i < userListOnServer_parsed.length; i++) {
				if (userListOnServer_parsed[i]._id === synth_user._id) { userListOnServer_parsed.splice(i, 1); }
			}
			userListOnServer_parsed.push(synth_user);
			localStorage.setItem("userListOnServer", JSON.stringify(userListOnServer_parsed));
		} else { /*–ø–µ—Ä–≤—ã–π —é–∑–µ—Ä*/
			console.log("–ø–µ—Ä–≤—ã–π —é–∑–µ—Ä");
			var temp_arr = new Array();
			temp_arr.push(synth_user);
			localStorage.setItem("userListOnServer", JSON.stringify(temp_arr));
		}
	} else { console.log("LocalStorage is not supported."); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/

	/*–Ω–∞–π—Ç–∏ –ø–æ –ª–æ–≥–∏–Ω—É
	–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å
	–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ*/
};

Server.prototype.logInCurrUnit = function(curr_login, curr_password) {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) { /*–µ—Å–ª–∏ —é–∑–µ—Ä –≤–≤–æ–¥–∏–ª –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –º—ã –∑–∞–±–∏—Ä–∞–µ–º —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –∫ –Ω–∏–º –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨ –° –ü–û–ú–û–©–¨–Æ –§–£–ù–ö–¶–ò–ô ADDDOC ADDDOCDATAITEM –ø–æ–∫–∞ —á—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–Ω—É–ª—è—é –≤—Å–µ*/
		/*–ó–ê–¥–ê–í–ê–¢–¨ –í–û–ü–†–û–°, –°–û–•–†–ê–ù–ò–¢–¨ –õ–ò –í–†–ï–ú–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –í–í–ï–î–ï–ù–´ –î–û –í–•–û–î–ê?? –ò–õ–ò –í–•–û–î–ò–¢–¨ –í –°–¢–ê–†–´–ô –ê–ö–ö –ë–ï–ó –ù–û–í–´–• –î–ê–ù–ù–´–•*/
		if ((there_is_unsynchronized_data_on_local === "true") || (there_is_unsynchronized_data_on_local === true)) {
			there_is_unsynchronized_data_on_local = false;
			localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
			localStorage.getItem("temp_user_data", null);
		}
		var userListOnServer = localStorage.getItem("userListOnServer");
		if (userListOnServer && (userListOnServer !== "null")) {
			JSON.parse(userListOnServer, function(key, value) {
				if ((this._typeofObj === "Unit") && (this._login === curr_login) && (this._password === curr_password)) {

					loged_in_user = new Unit(this);

					console.log("login succesful");
					isLoginDone = true;
					localStorage.setItem("isLoginDone", true);

					Server.prototype.getAllData();

					location.reload();
					
					return 1;
				 }
			});
			throw new Error();
		} else throw new Error();
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

Server.prototype.registerNewUnit = function(temp_mail_, temp_login_, temp_password_, temp_surname_, temp_name_, temp_firstname_) {
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) { /*–µ—Å–ª–∏ —é–∑–µ—Ä –≤–≤–æ–¥–∏–ª –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –º—ã –∑–∞–±–∏—Ä–∞–µ–º —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –∫ –Ω–∏–º –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ*/
		/*–ó–ê–¥–ê–í–ê–¢–¨ –í–û–ü–†–û–°, –°–û–•–†–ê–ù–ò–¢–¨ –õ–ò –í–†–ï–ú–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –í–í–ï–î–ï–ù–´ –î–û –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò?? –ò–õ–ò –°–û–ó–î–ê–¢–¨ –ù–û–í–´–ô –ß–ò–°–¢–´–ô –ê–ö–ö–ê–£–ù–¢ –ë–ï–ó –î–ê–ù–ù–´–•*/
		var temp_unit_ = null;
		if ((there_is_unsynchronized_data_on_local === "true") || (there_is_unsynchronized_data_on_local === true)) {
			JSON.parse(localStorage.getItem("temp_user_data"), function(key, value) {
				if (this._typeofObj === "Unit") { temp_unit_ = new Unit(this); }
			});
			there_is_unsynchronized_data_on_local = false;
			localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
			localStorage.getItem("temp_user_data", null);
			temp_unit_.setMail(temp_mail_);
			temp_unit_.setLogin(temp_login_);
			temp_unit_.setPassword(temp_password_);
			if (temp_surname_) { temp_unit_.setSurname(temp_surname_); }
			if (temp_name_) { temp_unit_.setName(temp_name_); }
			if (temp_firstname_) { temp_unit_.setFirstname(temp_firstname_); }
		} else {
			temp_unit_ = new Unit(temp_mail_, temp_login_, temp_password_, temp_surname_, temp_name_, temp_firstname_);
		}
		Server.prototype._synchronizeUserData(temp_unit_);
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

/* –ü–†–û–í–ï–†–Ø–Ø–Ø–Ø–Ø–Ø–Ø–Ø–Ø–Ø–Ø–Ø–¢–¨ —ç—Ç–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –µ—â–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏–Ω */ /* —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è */


Server.prototype.isUnitByMail = function(mail_value) { /* —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è */
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		var userListOnServer = localStorage.getItem("userListOnServer");
		if (userListOnServer && (userListOnServer !== "null")) {
			JSON.parse(userListOnServer, function(key, value) {
				if ((this._typeofObj === "Unit") && (this._mail === mail_value)) {
					return true;
				}
			});
			return false;
		} else { throw new Error(); }
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}

Server.prototype.setNewUnitPassByMail = function(mail_value, password_value) { /* —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è */
	/*–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
	if (isStorageSupport) {
		var userListOnServer = localStorage.getItem("userListOnServer");
		if (userListOnServer && (userListOnServer !== "null")) {
			JSON.parse(userListOnServer, function(key, value) {
				if ((this._typeofObj === "Unit") && (this._mail === mail_value)) {
					var temp_us = new User(this);
					temp_us.setPassword(password_value);
					Server.prototype._synchronizeUserData(temp_us);
					Server.prototype.logInCurrUnit(temp_us.getLogin(), temp_us.getPassword());
				}
			});
		} else { throw new Error(); }
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
	/*/–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω*/
}
/* ---------------/Server--------------- */

/* ---------------myLocalStorage--------------- */
var myLocalStorage = function() {} /*—Å–∏–Ω–≥–ª—Ç–æ–Ω*/ /*—ç—Ç–æ –Ω–µ —Å–µ—Ä–≤–µ—Ä, –∞ –∏–º–µ–Ω–Ω–æ –ª–æ–∫–∞–ª–∫–∞*/

myLocalStorage.prototype.getAllData = function() {
	if (isStorageSupport) {
		if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) {

			var userListOnLocal = localStorage.getItem("userListOnLocal");
			if (userListOnLocal && (userListOnLocal !== "null")) {
				JSON.parse(userListOnLocal, function(key, value) {
					 if (this._typeofObj === "Unit") { Unit.prototype.userList.push(new Unit(this)); console.log("c local —Å–æ–∑–¥–∞–Ω —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π unit –≤ —Å–ø–∏—Å–æ–∫");}
				});
			} else throw new Error();
			/*—Å—á–∏—Ç–∞–ª–∏ —Å–ø–∏—Å–æ–∫ —é–∑–µ—Ä–æ–≤*/

			var loged_in_user_data = localStorage.getItem("loged_in_user_data");
			if (loged_in_user_data && (loged_in_user_data !== "null")) {
				JSON.parse(loged_in_user_data, function(key, value) {
					 if (this._typeofObj === "Unit") { loged_in_user = new Unit(this); viewing_user = loged_in_user; console.log("c local –æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–Ω admin/moder");}
				});
			} else throw new Error();
			/*–æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥*/

		} else if ((isLoginDone === "true") || (isLoginDone === true)) {

			var loged_in_user_data = localStorage.getItem("loged_in_user_data");
			if (loged_in_user_data && (loged_in_user_data !== "null")) {
				JSON.parse(loged_in_user_data, function(key, value) {
					 if (this._typeofObj === "Unit") { loged_in_user = new Unit(this); viewing_user = loged_in_user; console.log("c local –æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–Ω user");}
				});
			} else throw new Error();
			/*–æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ —é–∑–µ—Ä–∞, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥*/

		} else {  /* if Temp - –ø–æ–ø—ã—Ç–∫–∞ —á—Ç–µ–Ω–∏—è –æ–¥–Ω–∞: —Å temp_user */

			var temp_user_data = localStorage.getItem("temp_user_data");
			if (temp_user_data && (temp_user_data !== "null")) {
				JSON.parse(temp_user_data, function(key, value) {
					if (this._typeofObj === "Unit") { temp_user = new Unit(this); viewing_user = temp_user; console.log("c local –æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–Ω temp"); }
				});
			} else throw new Error();
			/*–æ–±—ä–µ–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ temp'–∞, –∫–æ—Ç–æ—Ç—Ä—ã–µ –æ–Ω —Å–æ—Ö—Ä–∞–Ω–∏–ª*/
		}
	} else { console.log("LocalStorage is not supported."); throw new Error(); }
}

myLocalStorage.prototype.setAllData = function() {

	if ((isAdmin === "true") || (isAdmin === true)) {
		loged_in_user = new Unit("admin_mail0", "admin_login0", "admin_password0", "admin_surname0", "admin_name0", "admin_firstname0");
		loged_in_user.setLevel("admin");
		localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
		console.log("–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π admin.");

		viewing_user = loged_in_user;
		console.log("login succesful");
		isLoginDone = true;
		localStorage.setItem("isLoginDone", true);
	} else if ((isModer === "true") || (isModer === true)) {
		loged_in_user = new Unit("moder_mail0", "moder_login0", "moder_password0", "moder_surname0", "moder_name0", "moder_firstname0");
		loged_in_user.setLevel("moder");
		localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
		console.log("–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π moder.");

		viewing_user = loged_in_user;
		console.log("login succesful");
		isLoginDone = true;
		localStorage.setItem("isLoginDone", true);
	} else if ((isLoginDone === "true") || (isLoginDone === true)) {
		loged_in_user = new Unit("user_mail0", "user_login0", "user_password0", "user_surname0", "user_name0", "user_firstname0");
		localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
		console.log("–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π user.");

		viewing_user = loged_in_user;
		console.log("login succesful");
		isLoginDone = true;
		localStorage.setItem("isLoginDone", true);
	} else {  /* if Temp*/
		temp_user = new Unit();
		localStorage.setItem("temp_user_data", JSON.stringify(temp_user));
		console.log("–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π temp-user.");
		viewing_user = temp_user;
	}

 	if (viewing_user.getLevel() === "admin") { isAdmin = true; isModer = false; isUser = false; }
 	else if (viewing_user.getLevel() === "moder")  { isAdmin = false; isModer = true; isUser = false; }
	else { isAdmin = false; isModer = false; isUser = true; }

	localStorage.setItem("isAdmin", isAdmin);
	localStorage.setItem("isModer", isModer);
	localStorage.setItem("isUser", isUser);

	myLocalStorage.prototype.synchronizeAllData();
	there_is_unsynchronized_data_on_local = true;
	localStorage.setItem("there_is_unsynchronized_data_on_local", there_is_unsynchronized_data_on_local);
	Server.prototype.synchronizeAllData();
	/*location.reload();*/
}

myLocalStorage.prototype.synchronizeAllData = function(synth_user) { /*—ç—Ç–æ –Ω–µ —Å–µ—Ä–≤–µ—Ä, –∞ –∏–º–µ–Ω–Ω–æ –ª–æ–∫–∞–ª–∫–∞*/
	if ((isAdmin === "true") || (isAdmin === true) || (isModer === "true") || (isModer === true)) {
		myLocalStorage.prototype._synchronizeUserData(synth_user);
		/*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é, —á—Ç–æ–± –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫, –∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—è—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è*/
		/*myLocalStorage.prototype.setAllUnitsFromList(Unit.prototype.userList);*/
		try {
			if (loged_in_user.getId() === synth_user.getId()) { /*–µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞–∫–∫–æ–º —Å–∞–º–æ–≥–æ –∞–¥–º–∏–Ω–∞, –Ω—É–∂–Ω–æ –∑–∞—Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—å –µ–≥–æ –∞–∫–∫ –µ—â–µ –∏ –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á—É–∂–∏–º–∏ –∞–∫–∫–∞–º–∏ –≤ –ª–æ–∫–∞–ª—Å—Ç–æ—Ä–∞–≥–µ –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–∏—Å—Ç –≤ —Ü–µ–ª–æ–º*/
				loged_in_user = synth_user;
				if (isStorageSupport) {
					localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
				} else { console.log("LocalStorage is not supported."); }
			}
		} catch (error) {}
	} else if ((isLoginDone === "true") || (isLoginDone === true)) { /* if User */
		try {
			if (loged_in_user.getId() === synth_user.getId()) {
				loged_in_user = synth_user;
			}
		} catch (error) {}
		myLocalStorage.prototype._synchronizeUserData(loged_in_user);/*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–º —é–∑–µ—Ä–∞ –≤ –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫*/

		if (isStorageSupport) { /*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–º —é–∑–µ—Ä–∞ –µ—â–µ –∏ –æ—Ç–¥–µ–ª—å–Ω–æ*/
			localStorage.setItem("loged_in_user_data", JSON.stringify(loged_in_user));
		} else { console.log("LocalStorage is not supported."); }
	} else { /* if Temp */
		if (isStorageSupport) {/*—Å–∏–Ω—Ö—Ä–æ–Ω–∏–º temp —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω–æ*/
			try {
				if (temp_user.getId() === synth_user.getId()) {
					temp_user = synth_user;
				}
			} catch (error) {}
			localStorage.setItem("temp_user_data", JSON.stringify(temp_user));
		} else { console.log("LocalStorage is not supported."); }
	}
};

myLocalStorage.prototype._synchronizeUserData = function(synth_user) { /*–Ω–µ –¥–ª—è Temp! */
	if ((arguments.length === 0) || (!arguments[0])) {
		var synth_user = viewing_user;
	}
	if (isStorageSupport) {
		var userListOnLocal = localStorage.getItem("userListOnLocal");
		if (userListOnLocal && (userListOnLocal !== "null")) { /*–Ω–µ –ø–µ—Ä–≤—ã–π —é–∑–µ—Ä*/
			console.log("–Ω–µ –ø–µ—Ä–≤—ã–π —é–∑–µ—Ä");
			var userListOnServer_parsed = JSON.parse(userListOnLocal);
			for (var i = 0; i < userListOnServer_parsed.length; i++) {
				if (userListOnServer_parsed[i]._id === synth_user._id) { userListOnServer_parsed.splice(i, 1); }
			}
			userListOnServer_parsed.push(synth_user);
			localStorage.setItem("userListOnLocal", JSON.stringify(userListOnServer_parsed));
		} else { /*–ø–µ—Ä–≤—ã–π —é–∑–µ—Ä*/
			console.log("–ø–µ—Ä–≤—ã–π —é–∑–µ—Ä");
			temp_arr = new Array();
			temp_arr.push(synth_user);
			localStorage.setItem("userListOnLocal", JSON.stringify(temp_arr));
		}
	} else { console.log("LocalStorage is not supported."); }

	/*–Ω–∞–π—Ç–∏ –ø–æ –ª–æ–≥–∏–Ω—É
	–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å
	–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ*/
};

myLocalStorage.prototype.logOut = function() {
	isLoginDone = false;
	localStorage.setItem("isLoginDone", false);
	isAdmin = false;
	localStorage.setItem("isAdmin", false);
	isModer = false;
	localStorage.setItem("isModer", false);
	isUser = true;
	localStorage.setItem("isUser", true);
	Unit.prototype.userList = null;
	localStorage.setItem("userListOnLocal", null);
	viewing_user = null;
	loged_in_user = null;
	localStorage.setItem("loged_in_user_data", null);
	temp_user = null;
	localStorage.setItem("temp_user_data", null);
	there_is_unsynchronized_data_on_local = false;
	localStorage.setItem("there_is_unsynchronized_data_on_local", false);
	location.reload();
	/*setTimeout(function() {
		}, 6000);*/
}

/* ---------------/myLocalStorage--------------- */

/* —Ö–∞—Ä–¥ –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∏ –≤—Å—è */
if (isFirstAdminLoading === "true") {
	localStorage.clear();
	localStorage.setItem("nextIdOnServer", 0);
	isFirstAdminLoading = false;
	localStorage.setItem("isFirstAdminLoading", isFirstAdminLoading);
}

/* iniziaisation */
/* –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞. –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—Å—è—Ç—å –∏–∑ –ª–æ–∫–∞–ª–∫–∏. –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —é–∑–µ—Ä–∞ */

try {
	var err = 0;
	try {
		myLocalStorage.prototype.getAllData(); /*–ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –≤—Å–µ –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º –∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è –ø—É—Å—Ç–æ–π —Ç–µ–º–ø, –ø—Ä–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã–µ –±—É—Ä—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞*/
	} catch (error) { console.log(error);
		console.log("–î–∞–Ω–Ω—ã—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ."); err++; }
	if ((there_is_unsynchronized_data_on_local === "true") || (there_is_unsynchronized_data_on_local === true)) { /*–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏—Ö –∑–∞—Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç—å*/
		Server.prototype.synchronizeAllData();
	}
	/*–≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–±—Ä–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–≤–µ–∂–∞—á–æ–∫*/
	try {
		Server.prototype.getAllData();
		console.log("localStorage.getItem(userListOnLocal)");
		console.log(localStorage.getItem("userListOnLocal"));
	} catch (error) { console.log(error); console.log("–î–∞–Ω–Ω—ã—Ö –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ."); err++; }
	if (err > 1) { throw new Error(); } /*–µ—Å–ª–∏ –±–µ–∑—É—Å–ø–µ—à–Ω—ã –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∏ —Å–µ—Ä–≤–µ—Ä, —Ç–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ–º –ø–æ –Ω—É–ª–µ–≤–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É*/ /*–µ—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç–∏–ª, —Ç–æ –º–æ–∂–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å*/
} catch (error) { /* new Local */ /* —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –±–∞–∑—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ */
	myLocalStorage.prototype.setAllData();
}

/*var un1 = new Unit("mail", "login", "password", "surname", "name", "firstname");
un1.setLevel("moder");
var un2 = new Unit("mail", "login", "password", "surname", "name", "firstname");
un2.setLogin("–≤—Ç–æ—Ä–æ–π");*/


/*Server.prototype.synchronizeAllData();*/

try {
console.log(viewing_user.userList);
} catch (error) {}
console.log(localStorage.getItem("userListOnLocal"));
console.log(localStorage.getItem("userListOnServer"));

/* /iniziaisation */



/*register = new Unit(mail, login...) = addNewUnit(user)
login = new Unit(obj) =  logInCurrUnit(curr_login, curr_password)
								ifAdmin setAdmin
								ifUser setUser*/

